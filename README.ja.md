# Magazine Comic Viewer Helper

特定の漫画閲覧サイト向けのTampermonkey/Greasemonkey用ユーザースクリプトです。
画像をブラウザのビューポートサイズに合わせて自動調整し、画像単位での快適なスクロール移動を可能にします。

## 主な機能

*   **画像のビューポート適合**: 画像のサイズをウィンドウの幅・高さに合わせて自動的にリサイズします。
*   **画像単位のスクロール**: キーボードや画面上のボタンで、画像ごとにスムーズにスクロール移動できます。
*   **ナビゲーションUI**: 画面右下に現在のページ数（画像番号）と移動ボタンを表示します。
*   **キーボードショートカット**: 矢印キーやスペースキーで手軽に操作可能です。

## インストール方法

1.  ブラウザに [Tampermonkey](https://www.tampermonkey.net/) などのユーザースクリプトマネージャー拡張機能をインストールします。
2.  このリポジトリの `comic-viewer-helper.user.js` の内容をコピーするか、Rawファイルへのリンクを開いてインストールします。
3.  対応するサイトにアクセスすると自動的に有効になります。

## 使い方

スクリプトが有効なページでは、以下の操作が可能です。

### キーボードショートカット

| 動作 | キー |
| :--- | :--- |
| **次の画像へ** | `↓` `→` `PageDown` `Space` `j` |
| **前の画像へ** | `↑` `←` `PageUp` `Shift + Space` `k` |

### 画面UI

画面右下に表示されるパネルから以下の操作ができます。**パネルはドラッグ可能**で、マウスで好きな位置に移動できます。

*   **ページカウンター**: 現在の画像位置 / 総画像数を表示
*   **見開き切替 (Spread)**: 単ページ表示と見開き表示を切り替えます（`d` キーでも切り替え可能）
*   **<<**: 最初の画像へ移動
*   **<**: 前の画像へ移動
*   **>**: 次の画像へ移動
*   **>>**: 最後の画像へ移動

## 動作対象サイト

*   `https://something/magazine/*`
*   `https://something/fanzine/*`

※ スクリプト内の `@match` 設定で対象ドメインは変更可能です。

## 技術仕様

*   対象コンテナセレクタ: `#post-comic`
*   対象画像セレクタ: `#post-comic img`

## 開発者向け情報

### ⚠️ 注意: `.user.js` ファイルを直接編集しないでください
ルートディレクトリにある `comic-viewer-helper.user.js` は**ビルド成果物**です。手動で編集しても、次のビルド時に上書きされます。
コードの修正は `src/` ディレクトリ内のファイルに対して行い、ビルドコマンドを実行してください。

### 準備
1. 依存関係のインストール:
   ```bash
   npm install
   ```

### ビルド
ソースコードから `comic-viewer-helper.user.js` を生成します：
```bash
npm run build
```

### テスト
Vitest を使用してユニットテストを実行します：
```bash
npm test
```

## 免責事項

このスクリプトは個人的な学習および利便性向上のために作成されたものです。
対象サイトの仕様変更により動作しなくなる可能性があります。
