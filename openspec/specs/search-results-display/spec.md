# Search Results Display (検索結果表示)

## Purpose
検索モーダル内で検索結果をグリッド形式で視覚的に表示し、件数・もっと見る リンクを添えて、ユーザーが素早く目的の作品へアクセスできるようにします。
## Requirements
### Requirement: 検索結果のグリッド表示
システムは、検索実行後に取得した検索結果をモーダル内のグリッド形式で表示しなければならない (SHALL)。グリッドの上部には、現在の検索条件（キーワード、またはタグ/ジャンル名）とヒット件数を表示しなければならない。 各アイテムはサムネイル・タイトルで構成され、クリックで対象コンテンツへ遷移する。

#### Scenario: 検索結果の一覧表示
- **WHEN** 検索キーワードの入力、またはタグの選択に対応する検索結果が取得された時
- **THEN** モーダル内に検索条件（例：「キーワード: 検索語」または「タグ: タグ名」）と検索結果がグリッド形式で表示され、各アイテムにサムネイルとタイトルが示されること

#### Scenario: 検索結果アイテムへのリンク
- **WHEN** ユーザーが検索結果の一つのアイテムをクリックした時
- **THEN** そのコンテンツのURLに遷移すること

### Requirement: 検索結果の件数表示
システムは、検索結果の件数をグリッドの上方に表示しなければならない (SHALL)。
件数がHTMLから取得できない場合は件数表示を省略する。

#### Scenario: 件数の表示
- **WHEN** 検索結果が取得され、レスポンスHTMLに件数情報が含まれる時
- **THEN** モーダル内で件数が表示されること

#### Scenario: 件数情報が無い場合
- **WHEN** 検索結果が取得され、レスポンスHTMLに件数情報が含まれない時
- **THEN** 件数表示は省略され、検索結果グリッドのみが表示されること

### Requirement: バックグラウンド更新中の表示
システムは、キャッシュを表示中にバックグラウンドで最新データを取得している間、ユーザーに更新中であることを示さなければならない (SHALL)。

#### Scenario: サイレントフェッチ中のインジケータ表示
- **WHEN** キャッシュを表示し、バックグラウンドで最新データを取得（SWR更新）している時
- **THEN** UI上の目立たない場所に更新中であることを示すインジケータが表示されること

### Requirement: ページングナビゲーションの表示
システムは、検索結果に複数ページが存在する場合、モーダル内のグリッド下部にページングナビゲーション（前へ、次へ、ページ番号）を表示しなければならない (SHALL)。
ユーザーはこれらのコントロールを使用して、外部サイトへ遷移することなく、モーダル内で検索結果のページを切り替えられる。

#### Scenario: ページングナビゲーションのレンダリング
- **WHEN** 検索結果が取得され、レスポンスHTMLにページネーション要素（`wp-pagenavi` 等）が含まれる時
- **THEN** モーダル内に現在のページ番号、前後のページ、および最後のページへのリンクが表示されること

#### Scenario: 次のページへ移動
- **WHEN** ユーザーがページングナビゲーションの「次へ」または「2」などのページ番号をクリックした時
- **THEN** システムは Ajax でそのページの検索結果を取得し、モーダル内のグリッドとナビゲーションを即座に更新すること

#### Scenario: 前のページへ移動
- **WHEN** ユーザーが2ページ目以降を表示中に「前へ」または「1」などのページ番号をクリックした時
- **THEN** システムは Ajax でそのページの検索結果を取得し、モーダル内のグリッドとナビゲーションを即座に更新すること

