# activation-toggle

## Purpose

スクリプト全体の動作状態を制御し、副作用のクリーンアップを行う機能を提供します。

## Requirements

### Requirement: スクリプトの無効化（OFF状態）
システムは、機能をOFFにした際に、すべての副作用（DOM操作、スタイル適用、イベント監視）を解除しなければならない（SHALL）。

#### Scenario: 機能をOFFにする
- **WHEN** ユーザーがON/OFFボタンをクリックしてOFFにする
- **THEN** 画像が元のサイズに戻り、見開き表示（Spread）が解除される
- **AND** `j/k` などのキーボード操作が反応しなくなる
- **AND** パネルが最小化される

### Requirement: スクリプトの有効化（ON状態）
システムは、機能をONにした際に、即座にスタイルと機能を再適用しなければならない（SHALL）。

#### Scenario: 最小化状態からONに戻す
- **WHEN** ユーザーが最小化されたアイコンをクリックしてONにする
- **THEN** 通常のコントロールパネルが表示される
- **AND** 画像のフィットと見開き設定が現在のページ位置から再適用される

### Requirement: 状態の永続化
システムは、ON/OFFの状態をリロードやページ遷移をまたいで保持しなければならない（SHALL）。
