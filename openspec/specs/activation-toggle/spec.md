# activation-toggle

## Purpose
スクリプト全体の動作状態を制御し、DOM操作やイベントリスナーなどの副作用を適切に適用およびクリーンアップする機能を提供します。これにより、ユーザーは任意のタイミングで機能を有効化・無効化でき、他のサイト機能との干渉を防ぐことができます。

## Requirements

### Requirement: スクリプトの無効化（OFF状態）
システムは、機能をOFFにした際に、すべての副作用（DOM操作、スタイル適用、イベント監視）を解除しなければならない（SHALL）。

#### Scenario: 機能をOFFにする
- **WHEN** ユーザーがON/OFFボタンをクリックしてOFFにする
- **THEN** 画像が元のサイズに戻り、見開き表示（Spread）が解除される
- **AND** キーボード操作が反応しなくなる
- **AND** パネルが最小化される

### Requirement: スクリプトの有効化（ON状態）
システムは、機能をONにした際に、即座にスタイルと機能を再適用しなければならない（SHALL）。

#### Scenario: 最小化状態からONに戻す
- **WHEN** ユーザーが最小化されたアイコンをクリックしてONにする
- **THEN** 通常のコントロールパネルが表示される
- **AND** 画像のフィットと見開き設定が現在のページ位置から再適用される

### Requirement: 状態の永続化
システムは、ON/OFF の状態をリロードやページ遷移をまたいで保持しなければならない（SHALL）。

#### Scenario: 状態の復元
- **WHEN** ユーザーがページをリロードする
- **AND** 直前の状態が OFF であった
- **THEN** スクリプトは無効化（OFF）された状態で初期化される