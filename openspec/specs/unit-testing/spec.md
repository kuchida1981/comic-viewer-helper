# unit-testing

## Purpose
プロジェクトの品質を維持するためのユニットテスト環境と、コアロジックに対するテストコードを提供します。
## Requirements
### Requirement: ユニットテストの実行環境
システムは、開発者がローカル環境でユニットテストを実行できる環境を提供しなければならない（MUST）。

#### Scenario: テストの実行
- **WHEN** 開発者が `npm test` コマンドを実行する
- **THEN** `.ts` で記述された全てのユニットテストが実行され、結果（パス/失敗）が表示される

### Requirement: コアロジックのテスト
システムは、主要な関数やクラス（画像のリサイズ、ページ判定など）に対するテストコードを含まなければならない（MUST）。テストコード内のモック生成は `src/test/mocks/` に提供されるFactory/ユーティリティを利用し、明示的な `any` 型キャストを含まないものとする。
また、正常系だけでなく、要素の欠損や未定義のプロパティなどの異常系・エッジケースに対するテストケースを含まなければならない（SHALL）。

#### Scenario: 型定義を活用したテスト
- **WHEN** テストコードを記述・実行したとき
- **THEN** モック (`vi.mock`, `vi.fn`) やスタブを含め、TypeScript の型定義によって関数の引数や戻り値が静的に検証され、実行時エラーの発生リスクが低減される

#### Scenario: テストコード内に明示的な any が存在しない
- **WHEN** 全テストファイルに対して静的解析を実行する
- **THEN** `any` 型の明示的な使用がゼロであり、モック生成はFactory関数を経由している

#### Scenario: 異常系（null/未定義）のテスト
- **WHEN** 関数に対して null 要素や不完全なプロパティを持つモックを渡しテストを実行する
- **THEN** テストがパスし、関数が期待通りに（クラッシュせずに）安全に処理を完了することが検証される

