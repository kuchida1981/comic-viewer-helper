# metadata-view

## Purpose
このスペックは、コミックビューア上でのメタデータ（作品タイトル、タグ、関連作品など）の閲覧機能に関する要件を定義します。

## Requirements

### Requirement: Metadata Extraction
システムは、閲覧中のドキュメントから以下の情報を抽出し、内部状態として保持しなければならない（SHALL）。
- **タイトル**: 作品のメインタイトル (`h1`)。
- **タグ**: 作品に関連付けられたタグのリスト (`#post-tag a`)。
- **関連作品**: 関連作品のリスト (`.post-list-image` 以下の情報)。

#### Scenario: ページ読み込み時の抽出
- **WHEN** 拡張機能が初期化されたとき
- **THEN** ドキュメントをスキャンしてメタデータを抽出する
- **AND** 抽出したデータをStoreに保存する

### Requirement: Metadata Access GUI
ユーザーは、GUI上のボタンを通じてメタデータ閲覧モーダルを開くことができなければならない（SHALL）。

#### Scenario: モーダルを開く
- **WHEN** ユーザーがGUI上の「Info」ボタンをクリックする
- **THEN** メタデータ閲覧モーダルが表示される
- **AND** モーダルが表示されている間、背景は半透明のオーバーレイで覆われる

### Requirement: Metadata Modal Content
メタデータ閲覧モーダルは、抽出された情報を分かりやすく表示しなければならない（SHALL）。
- **タイトル**: モーダルの上部に強調表示する。
- **タグ**: クリック可能なチップ形式で表示し、クリックすると別タブでリンク先を開く。
- **関連作品**: サムネイルとタイトルを表示し、クリックすると別タブでリンク先を開く。

### Requirement: Modal Dismissal
ユーザーは、モーダルを簡単に閉じることができなければならない（SHALL）。

#### Scenario: モーダルを閉じる
- **WHEN** ユーザーがモーダル内の「Close」ボタンをクリックする
- **OR** ユーザーがモーダルの外側（オーバーレイ部分）をクリックする
- **OR** ユーザーが Esc キーを押す
- **THEN** モーダルが閉じ、元の閲覧画面に戻る

### Requirement: Interaction Isolation
メタデータ閲覧モーダルが表示されている間、システムは背景のコンテンツに対するナビゲーション操作（キーボード、ホイール）を無効化しなければならない（SHALL）。これにより、モーダル内のスクロール操作が背景のページ遷移を引き起こすことを防ぐ。

#### Scenario: ナビゲーションの抑制
- **WHEN** メタデータ閲覧モーダルが表示されている
- **THEN** `j`, `k`, `Space`, 矢印キー等によるページ移動が無視される
- **AND** マウスホイールによる操作が背景の画像遷移を引き起こさない
