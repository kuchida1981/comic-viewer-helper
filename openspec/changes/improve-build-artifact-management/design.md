## Context

現在、ビルド成果物（`dist/`）がソースコードと同じレポジトリの同一ブランチで管理されています。これにより、開発中のプルリクエストに巨大なビルド差分が含まれ、レビューが困難になっています。一方で、TampermonkeyなどのツールでRaw URLから最新版をインストール・更新できる利便性は維持する必要があります。

## Goals / Non-Goals

**Goals:**
- ソースコードブランチ（`main`および作業ブランチ）からビルド成果物を排除する。
- `main`ブランチへのプッシュ時に、GitHub Actionsで自動的にビルドとデプロイを行う。
- 配布専用のブランチ（`release`）を自動更新し、常に最新の安定版をRaw URL経由で提供可能にする。

**Non-Goals:**
- npmレジストリ等への外部パブリッシュ。
- 過去の全バージョンを配布ブランチに保持すること（最新の安定版を提供できれば良い）。

## Decisions

### 1. 配布専用ブランチ (`release`) の導入
- **決定**: ビルド成果物のみを保持する `release` ブランチを新設する。
- **理由**: メインブランチをクリーンに保ちつつ、Raw URL 経由でのインストール（配布）を継続するため。
- **代替案**: GitHub Releases のアセット機能。→ 常に「最新版」を指す固定のRaw URLを提供することが難しいため、ブランチ案を採用。

### 2. GitHub Actions による自動デプロイ
- **決定**: `JamesIves/github-pages-deploy-action` または同等の仕組みを使用して、ビルド成果物を `release` ブランチへプッシュする。
- **理由**: 手動ビルドとプッシュの手間を省き、ソースと成果物の不一致を防ぐため。

### 3. .gitignore の更新
- **決定**: `main` ブランチにおいて `dist/` を `.gitignore` に追加し、既存のファイルを削除する。
- **理由**: 以降のコミットにビルド成果物が含まれないようにするため。

## Risks / Trade-offs

- **[Risk] インストールURLの変更** → ユーザーが現在参照している Raw URL が無効になる。
  - **Mitigation**: README を更新し、古いURLからの移行を促す。また、可能であれば旧ファイルの最終更新で「新しいURLはこちら」といったコメントを含める。
- **[Risk] CIの失敗による配布停止** → ビルドが失敗すると `release` ブランチが更新されない。
  - **Mitigation**: `main` ブランチへのマージ前のCIチェック（既存の `build.yml`）を厳格に運用し、デプロイワークフロー自体の失敗も通知するようにする。
