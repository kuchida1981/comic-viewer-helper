## Context

現在の見開き表示ロジックは、画像の向き（Landscape か Portrait か）と `spreadOffset` に基づいてペアリングを決定しています。第1ページや最終ページを単一表示にしたい場合、現状では `spreadOffset` を調整するか、画像が横長である必要があります。これを、ページの位置情報に基づいて自動的に単一表示するように拡張します。

## Goals / Non-Goals

**Goals:**
- 第1ページ（インデックス 0）を常に単一表示にする。
- 最終ページ（インデックス N-1）を常に単独の行として表示し、前のページとペアにならないようにする。
- 既存の `spreadOffset` や画像回転等のロジックと整合性を保つ。

**Non-Goals:**
- 第1ページ以外の特定のページ（例：章の区切り）の自動判定。
- 単一ページ表示モード時の挙動変更。

## Decisions

### 1. ペアリング判定ロジックの修正場所
`src/logic.js` の `fitImagesToViewport` 関数内のループ内で、ペアリングを試行する前にインデックス判定を追加します。

- **理由**: ペアリングは現在のインデックス `i` と次のインデックス `i+1` の関係に依存するため、ループ内での制御が最も直接的で確実です。
- **詳細**:
    - `i === 0` の場合は無条件で `pairWithNext = false`。
    - `i + 1 === allImages.length - 1`（次が最終ページ）の場合も無条件で `pairWithNext = false`。これにより、最後から2番目のページが最後のページとペアを組むのを防ぎます。

### 2. `shouldPairWithNext` 関数のシグネチャ維持
`shouldPairWithNext` 関数は純粋に「画像プロパティ（向き等）」に基づいて判定を行う役割とし、インデックスに基づいた「表示上の例外ルール」は呼び出し側の `fitImagesToViewport` で管理します。

- **理由**: インデックスというコンテキストを関数の外で処理することで、関数の責務を分離し、将来的なロジック変更にも柔軟に対応できるようにします。

## Risks / Trade-offs

- **[Risk]** 短いページ数のドキュメント（例：2ページのみ）での挙動。
    - **Mitigation**: 2ページしかない場合、インデックス0は「第1ページ」、インデックス1は「最終ページ」となるため、両方が単一表示されます。これは「表紙と裏表紙のみ」の構成として妥当な挙動です。
- **[Risk]** 最終ページが単独で表示されることで、オフセットの設定によっては直前のページも単独表示になり、単一表示が続く可能性がある。
    - **Mitigation**: これは仕様通りの挙動であり、オフセットはユーザーが手動で調整可能なため許容します。
