## MODIFIED Requirements

### Requirement: Keyboard Navigation
The system SHALL provide keybindings for navigating between images. ナビゲーションは、現在の画像のインデックスに基づいて行われ、遷移先の画像が読み込み完了していない場合は読み込みを待機してから実行されなければならない（SHALL）。また、ブラウザの標準スクロールバーが非表示の場合であっても、これらの操作は完全に機能し続けなければならない。

#### Scenario: 次のページへ（ロード済み）
- **WHEN** ユーザーが「次へ」のキー（`j`, `ArrowDown`, `PageDown`, `ArrowLeft`, `Space`）を押す
- **AND** 次の画像が既に読み込み完了している
- **THEN** ビューポートが即座に次の画像または見開き画像までスクロールする
- **AND** 画像/見開き画像がビューポートの垂直方向中央に配置される

#### Scenario: 次のページへ（ロード未完了）
- **WHEN** ユーザーが「次へ」のキーを押す
- **AND** 次の画像がまだ読み込まれていない
- **THEN** 画面にローディング表示が現れ、スクロールは待機される
- **AND** 画像の読み込みが完了次第、自動的にスクロールが実行される

#### Scenario: 前のページへ
- **WHEN** ユーザーが「前へ」のキー（`k`, `ArrowUp`, `PageUp`, `ArrowRight`, `Shift+Space`）を押す
- **THEN** ビューポートが前の画像または見開き画像までスクロールする
- **AND** 画像/見開き画像がビューポートの垂直方向中央に配置される

### Requirement: 最終ページ超過時の Info 画面自動表示
「次へ」方向のナビゲーション操作で現在の画像が既に最終ページであった場合、システムは info 画面（メタデータモーダル）を自動で表示しなければならない（SHALL）。ただし、モーダルが既に表示されている場合は何もしない。

#### Scenario: 最終ページで「次へ」を操作した場合
- **WHEN** ユーザーが最終ページを閲覧しているとき
- **AND** 「次へ」のキー（`j`, `ArrowDown`, `PageDown`, `ArrowLeft`, `Space`）またはナビゲーションボタンの「次へ」を操作する
- **THEN** メタデータモーダル（info 画面）が自動で表示される

#### Scenario: モーダルが既に表示されている場合は重複表示しない
- **WHEN** メタデータモーダルが既に表示されている
- **AND** ユーザーが最終ページで「次へ」操作を行う
- **THEN** モーダルの状態は変わらず、二重表示にならない

#### Scenario: 最初のページで「前へ」を操作した場合は対象外
- **WHEN** ユーザーが最初のページを閲覧しているとき
- **AND** 「前へ」のキー（`k`, `ArrowUp`, `PageUp`, `ArrowRight`, `Shift+Space`）を操作する
- **THEN** モーダルは表示されず、何も起こらない

## ADDED Requirements

### Requirement: Right-to-Left Navigation Direction Constant
システムは、ナビゲーション方向の割り当てを定数として管理しなければならない（SHALL）。これにより、右開き書籍と左開き書籍の方向切り替えが将来の設計で対応可能になる。

#### Scenario: 定数による方向管理
- **WHEN** 開発者がナビゲーション方向の割り当てを変えたい場合
- **THEN** 定数の値を変更するだけで、GUIボタンとキーバインドの両方の動作が連携して切り替わる

### Requirement: GUI Navigation Button Direction Inversion
GUIナビゲーションボタンは、右開き書籍の読み方向に合わせて反転されなければならない（SHALL）。`<` / `<<` が「次へ」「最後へ」に対応し、`>` / `>>` が「戻る」「最初へ」に対応する。

#### Scenario: 反転後のボタン動作
- **WHEN** ユーザーが `<` ボタンをクリックする
- **THEN** 次のページへスクロールする（「次へ」動作）

#### Scenario: 反転後の先頭・末尾ボタン動作
- **WHEN** ユーザーが `<<` ボタンをクリックする
- **THEN** 最後のページへスクロールする（「最後へ」動作）
- **WHEN** ユーザーが `>>` ボタンをクリックする
- **THEN** 最初のページへスクロールする（「最初へ」動作）