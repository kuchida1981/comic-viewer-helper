## 文脈 (Context)

現在のナビゲーションUIは、ビューポートの右下に固定（fixed）されています。これが一部のコンテンツを遮ることがあるため、ドラッグ可能かつ位置を永続化できるようにし、さらにパワーユーザー向けにキーボードショートカットを追加します。

## ゴール / 非ゴール

**ゴール:**
- ナビゲーションパネルのドラッグ＆ドロップを有効にする。
- `localStorage` を使用して、セッションをまたいでパネル位置を維持する。
- 次/前の画像への移動に `j`/`k` ショートカットを追加する。

**非ゴール:**
- 高度なドッキング挙動（画面端への吸着など）。
- パネルのリサイズ機能。

## 技術的決定 (Decisions)

### ドラッグの実装
ライブラリに依存せず、`mousedown`、`mousemove`、`mouseup` イベントを使用したカスタムドラッグハンドラを実装します。
- **理由**: 単純な機能のために外部依存関係を追加することを避けるため。
- **座標系**: 初期状態は `bottom`/`right` 配置です。最初のドラッグ操作時（または保存された位置の復元時）に `top`/`left` 配置に切り替え、ビューポートに対する座標計算を簡素化します。

### ストレージ戦略
- **キー**: `comic-viewer-helper-gui-pos`
- **形式**: JSONオブジェクト `{ top: number, left: number }` (ピクセル単位)。
- **復元**: 初期化時にストレージを確認します。存在する場合は `top`/`left` を適用し、`bottom`/`right` を解除します。存在しない場合はデフォルトの CSS (`bottom: 20px; right: 20px`) にフォールバックします。

### ウィンドウリサイズへの対応
- 今回のイテレーションでは、リサイズ時の複雑な境界制約は実装しません。ウィンドウが縮小してパネルが画面外に出た場合、ユーザーがパネルを見失う可能性があります。
- **緩和策**: ロード時に保存された座標が現在のビューポート内にあるか簡易チェックし、範囲外の場合はデフォルト位置にリセットします。

## リスク / トレードオフ

- **リスク**: モニター構成の変化などで、保存された座標が画面外になりパネルにアクセスできなくなる。
- **緩和策**: 初期化時に座標を `window.innerWidth` と `window.innerHeight` の範囲内にクランプ（制限）する処理を追加します。