## Why

`src/main.js` が肥大化し、状態管理、UI構築ロジック、イベントハンドリングが密結合しています。これにより、コードの可読性が低下し、新しい機能の追加やUIの変更が困難になっています。また、UI側のロジックがテストしにくい構造であるため、品質の維持にも課題があります。これらを整理し、最新のベストプラクティスに沿った疎結合でテスト可能な構造にリファクタリングします。

## What Changes

- **状態管理の一元化**: `isEnabled`, `isDualViewEnabled`, `spreadOffset` などの状態と永続化ロジックを管理する `Store` クラスを導入します。
- **UIのコンポーネント化**: 巨大な `createNavigationUI` 関数を小さなコンポーネント（ボタン、カウンター、トグルなど）に分割し、宣言的なUI構築を目指します。
- **ドラッグロジックの分離**: GUIコンテナのドラッグ・アンド・ドロップ機能を独立したモジュールとして抽出します。
- **スタイルの整理**: JS内に散在しているインラインスタイルを、CSS（または一括注入するスタイルタグ）に移行し、`classList` による制御を基本とします。
- **テスト可能性の向上**: 各コンポーネントや `Store` クラスを個別に単体テストできる構造にします。

## Capabilities

### New Capabilities
- `state-management`: ユーザー設定や閲覧状態を一元管理し、変更を通知する仕組み。
- `ui-architecture`: コンポーネントベースのUI構築と、CSSクラスを用いたスタイリング手法。

### Modified Capabilities
- なし（ユーザー向けの機能要件に変更はありません）

## Impact

- `src/main.js`: 大幅にリライトされ、App Manager（オーケストレーター）としての役割に特化します。
- 新規ファイル: `src/store.js`, `src/ui/` ディレクトリ配下のコンポーネント群。
- テスト: `src/store.test.js` などの新規テストファイルの追加。
- 既存の `src/logic.js`: 呼び出し方は整理されますが、内部ロジック自体への影響は最小限に留めます。
