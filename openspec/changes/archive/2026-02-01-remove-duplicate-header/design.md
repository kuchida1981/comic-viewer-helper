## Context

現在のビルドプロセス（`npm run build`）は、Vite によるバンドル後に `src/header.js` の内容を `cat` コマンドで先頭に結合する仕組みになっています。一方で、ソースコードである `src/main.js` の先頭にも同じ UserScript ヘッダブロックが記述されており、メタデータ管理の重複（Single Source of Truth の欠如）が発生しています。

## Goals / Non-Goals

**Goals:**
- メタデータ管理を `src/header.js` に一元化する。
- `src/main.js` から不要なヘッダブロックを削除する。
- 変更後も Lint (`npm run lint`) および テスト (`npm test`) が正常にパスすることを保証する。

**Non-Goals:**
- ビルドプロセスそのもの（`cat` による結合）の変更。
- メタデータの内容自体の変更。

## Decisions

### 1. `src/main.js` からのヘッダ削除
- **決定**: `src/main.js` の 1〜10行目付近にある `// ==UserScript==` ブロックを完全に削除する。
- **理由**: ビルド後の成果物にヘッダを付与する責務は `src/header.js` とビルドスクリプトが担っているため、ソースコード内に保持し続ける必要がない。
- **検討した代替案**: `src/main.js` 側を残して `src/header.js` を廃止する案もあったが、Vite はビルド時にコメントの一部を削除したり順序を変えたりする可能性があるため、確実に先頭へ結合できる現在の `cat` 方式（および `header.js` による管理）を維持する方が安全である。

### 2. 検証フローの厳格化
- **決定**: 実装後に `npm run lint` および `npm test` を実行し、ヘッダ削除が静的解析や実行時エラーを引き起こさないことを確認する。
- **理由**: UserScript 特有のコメントブロックが Lint ルールのトリガーになっている可能性（例: global 変数の定義等）を排除するため。

## Risks / Trade-offs

- **[Risk]** ヘッダ削除により ESLint が `import` の位置などで警告を出す可能性がある。
  - **Mitigation**: もし警告が出た場合は、ファイルの先頭が正しく `import` から始まるように修正し、プロジェクトの Lint 設定に適合させる。
- **[Risk]** 開発時に `src/main.js` を直接 Tampermonkey に読み込ませてデバッグしている場合、メタデータがなくなるため動作しなくなる。
  - **Mitigation**: このプロジェクトでは `npm run build` を実行して `dist/` 以下の成果物を使用するワークフローが確立されているため、ドキュメントに従い `dist/` 版を使用することで解決する。
