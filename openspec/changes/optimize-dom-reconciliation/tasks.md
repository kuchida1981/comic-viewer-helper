## 1. 準備とテスト

- [ ] 1.1 `src/logic.test.ts` に、`fitImagesToViewport` が既存の DOM 要素を再利用しているかを検証するテストケースを追加する（現在は再利用していないため、最初は失敗するか、挙動変更後にパスするように書く）。
- [ ] 1.2 `src/logic.test.ts` の既存テストが、DOMの内部構造（wrapperの有無など）に依存しすぎていないか確認し、必要ならリファクタリングする。

## 2. 実装 (Reconciliation Logic)

- [ ] 2.1 `src/logic.ts` に、画像とラッパーの現在の状態とあるべき状態を比較・更新するロジックを実装する（`fitImagesToViewport` 内、または新規関数）。
- [ ] 2.2 `cleanupDOM` 関数を修正し、全ての要素を削除するのではなく、必要な場合のみ使用するように変更する（あるいは `fitImagesToViewport` からの呼び出しを削除する）。
- [ ] 2.3 `fitImagesToViewport` を更新し、全削除・全生成ループを廃止して、Step 2.1 のロジックに置き換える。

## 3. 検証と仕上げ

- [ ] 3.1 `npm run test` を実行し、すべてのユニットテストが通過することを確認する。
- [ ] 3.2 実際のブラウザ（またはプレイグラウンド）で動作確認を行い、見開き切り替え時やリサイズ時に画像が消えたり順序が崩れたりしないか確認する。
- [ ] 3.3 コードのクリーンアップ（不要になったコメントやデバッグログの削除）。
